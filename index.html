<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ลงทะเบียน</title>
</head>
<body>
  <input type="hidden" id="hiddenVar"/>
  <script src="https://static.line-scdn.net/liff/edge/versions/2.9.0/sdk.js"></script>
  <script>
    function runApp() {
      liff.getProfile().then(profile => {
        var uid = profile.userId;
        var furl = "https://forms.reform.app/frdgco/register/00f6ly?a2190dcf-c6d2-4494-a179-854f3bcb05b8=" + uid;
        document.getElementById("hiddenVar").setAttribute("myAttr",furl)
      }).catch(err => console.error(err));
    }
    liff.init({ liffId: "1657004963-0a8kwk57" }, () => {
      if (liff.isLoggedIn()) {
        runApp()
      } else {
        liff.login();
      }
    }, err => console.error(err.code, error.message));
  </script>
  <div id="my-reform"></div>
  <script>window.Reform=window.Reform||function(){(Reform.q=Reform.q||[]).push(arguments)};</script>
  <script id="reform-script" async src="https://embed.reform.app/v1/embed.js"></script>
  <script>
    var rurl = document.getElementById("hiddenVar").getAttribute("myAttr");
    alert("rurl =" + rurl);
    Reform('init', {
          url: rurl,
          target: '#my-reform',
          background: 'default',
        })
  </script>
</body>
</html>
